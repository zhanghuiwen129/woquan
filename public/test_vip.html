<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>VIP功能测试</title>
</head>
<body>
    <h1>VIP功能测试页面</h1>

    <h2>测试链接</h2>
    <ul>
        <li><a href="/admin/vip" target="_blank">/admin/vip - VIP等级列表</a></li>
        <li><a href="/admin/vip/add_level" target="_blank">/admin/vip/add_level - 添加VIP等级</a></li>
        <li><a href="/admin/vip/order_list" target="_blank">/admin/vip/order_list - VIP订单列表</a></li>
        <li><a href="/admin/vip/user_vip_list" target="_blank">/admin/vip/user_vip_list - 用户VIP列表</a></li>
    </ul>

    <h2>数据库表检查</h2>
    <pre>
需要检查的表：
- wq_vip_levels (VIP等级表)
- wq_user_vip (用户VIP表)
- wq_vip_orders (VIP订单表)
- wq_admin (管理员表)
    </pre>

    <h2>可能的问题</h2>
    <ol>
        <li>数据库中缺少VIP相关表</li>
        <li>数据库中缺少管理员账号</li>
        <li>路由配置问题</li>
        <li>权限中间件拦截</li>
    </ol>

    <h2>解决方案</h2>
    <ol>
        <li>确保已执行 install.sql 导入数据库</li>
        <li>确保数据库配置正确 (config/database.php)</li>
        <li>确保已登录后台 (/admin/login)</li>
        <li>清除缓存</li>
    </ol>

    <script>
    // 测试AJAX请求
    function testUrl(url) {
        fetch(url)
            .then(response => response.text())
            .then(text => {
                console.log(url, '响应长度:', text.length);
                if (text.includes('请先登录')) {
                    alert('需要先登录后台！');
                    window.location.href = '/admin/login';
                }
            })
            .catch(error => {
                console.error(url, '错误:', error);
                alert('请求失败: ' + error.message);
            });
    }
    </script>
</body>
</html>
