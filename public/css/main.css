/**
 * Tailwind CSS 入口文件
 * 导入 Tailwind 的所有层
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============ 自定义基础样式 ============ */

@layer base {
  /* 全局样式 */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: "Helvetica Neue", "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* 滚动条样式 */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }
  
  ::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: #a1a1a1;
  }
  
  /* 暗黑模式滚动条 */
  .dark ::-webkit-scrollbar-track {
    background: #2a2a2a;
  }
  
  .dark ::-webkit-scrollbar-thumb {
    background: #4a4a4a;
  }
  
  .dark ::-webkit-scrollbar-thumb:hover {
    background: #6a6a6a;
  }
  
  /* 选中文本样式 */
  ::selection {
    background-color: rgba(74, 144, 226, 0.3);
    color: #333;
  }
  
  .dark ::selection {
    background-color: rgba(74, 144, 226, 0.5);
    color: #fff;
  }
}

/* ============ 自定义组件样式 ============ */

@layer components {
  /* 圆形头像 */
  .circle-avatar {
    @apply rounded-full object-cover border-2 border-white shadow-sm;
  }
  
  /* 动态卡片 */
  .dynamic-card {
    @apply w-full bg-bg-card rounded-xl shadow-soft overflow-hidden transition-all duration-200 hover:shadow-hover;
  }
  
  /* 导航激活状态 */
  .nav-active {
    @apply text-primary font-medium;
  }
  
  /* 按钮样式 */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .btn-primary {
    @apply bg-primary text-white hover:bg-secondary focus:ring-primary;
  }
  
  .btn-secondary {
    @apply bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500;
  }
  
  .btn-danger {
    @apply bg-danger text-white hover:bg-red-500 focus:ring-red-500;
  }
  
  .btn-success {
    @apply bg-success text-white hover:bg-green-500 focus:ring-green-500;
  }
  
  /* 输入框样式 */
  .input {
    @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all;
  }
  
  /* 标签样式 */
  .tag {
    @apply inline-block px-3 py-1 text-sm rounded-full;
  }
  
  .tag-primary {
    @apply bg-blue-100 text-blue-600;
  }
  
  .tag-success {
    @apply bg-green-100 text-green-600;
  }
  
  .tag-warning {
    @apply bg-yellow-100 text-yellow-600;
  }
  
  .tag-danger {
    @apply bg-red-100 text-red-600;
  }
  
  /* 图片网格 */
  .grid-images-1 {
    @apply grid grid-cols-1 gap-1;
  }
  
  .grid-images-2 {
    @apply grid grid-cols-2 gap-1;
  }
  
  .grid-images-3 {
    @apply grid grid-cols-3 gap-1;
  }
  
  .grid-images-4 {
    @apply grid grid-cols-2 gap-1;
  }
  
  .grid-images-more {
    @apply grid grid-cols-3 gap-1;
  }
  
  /* 加载占位 */
  .loading-skeleton {
    @apply bg-gray-200 animate-pulse rounded;
  }
  
  /* 话题标签样式 */
  .topic-tag {
    @apply text-primary hover:underline cursor-pointer;
  }
  
  /* @提及样式 */
  .mention {
    @apply text-primary hover:underline cursor-pointer font-medium;
  }
  
  /* 链接样式 */
  .link {
    @apply text-primary hover:underline cursor-pointer transition-colors;
  }
  
  /* 徽章 */
  .badge {
    @apply inline-flex items-center justify-center px-2 py-1 text-xs font-bold rounded-full;
  }
  
  .badge-primary {
    @apply bg-primary text-white;
  }
  
  .badge-danger {
    @apply bg-danger text-white;
  }
  
  /* 分割线 */
  .divider {
    @apply w-full border-t border-gray-200;
  }
  
  /* 空状态 */
  .empty-state {
    @apply flex flex-col items-center justify-center py-12 text-gray-400;
  }
}

/* ============ 自定义工具样式 ============ */

@layer utilities {
  /* 文本省略 */
  .text-ellipsis-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .text-ellipsis-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* 安全区域适配（移动端） */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* 隐藏滚动条但保留功能 */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* 玻璃拟态效果 */
  .glass {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }
  
  .dark .glass {
    background: rgba(30, 30, 30, 0.8);
  }
  
  /* 渐变背景 */
  .gradient-primary {
    background: linear-gradient(135deg, #4A90E2 0%, #6AA9F2 100%);
  }
  
  .gradient-success {
    background: linear-gradient(135deg, #52C480 0%, #7ED321 100%);
  }
  
  .gradient-danger {
    background: linear-gradient(135deg, #F04848 0%, #FF6B6B 100%);
  }
  
  .gradient-warning {
    background: linear-gradient(135deg, #F5A623 0%, #FFC107 100%);
  }
}

/* ============ 暗黑模式样式 ============ */

.dark {
  /* 暗黑模式背景 */
  .dark .bg-white,
  .dark .bg-gray-50 {
    background-color: var(--dark-bg-card, #25262B);
  }
  
  /* 暗黑模式文字 */
  .dark .text-gray-600,
  .dark .text-gray-500,
  .dark .text-gray-700 {
    color: var(--dark-text-secondary, #C9CDD4);
  }
  
  /* 暗黑模式边框 */
  .dark .border-gray-200,
  .dark .border-gray-300 {
    border-color: var(--dark-border-color, #323338);
  }
  
  /* 暗黑模式输入框 */
  .dark .input {
    @apply bg-dark-bg-card border-dark-border-color text-dark-text-primary;
  }
  
  /* 暗黑模式卡片 */
  .dark .dynamic-card {
    background-color: var(--dark-bg-card, #25262B);
  }
  
  /* 暗黑模式滚动条 */
  .dark ::-webkit-scrollbar-track {
    background: #2a2a2a;
  }
  
  .dark ::-webkit-scrollbar-thumb {
    background: #4a4a4a;
  }
}
